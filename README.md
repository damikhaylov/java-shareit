# Shareit

Приложение для шеринга вещей.

(Проект выполнен в рамках Яндекс.Практикума)

Приложение позволяет пользователям, с одной стороны, рассказать, какими вещами они готовы поделиться, 
а с другой стороны, находить нужную вещь и брать её в аренду на какое-то время.

Приложение позволяет бронировать вещь на определённые даты, при этом закрывает к ней доступ на время 
бронирования от других желающих. На случай, если нужной вещи на сервисе нет, у пользователей есть возможность 
оставлять запросы.

---

Проект построен на SpringBoot и реализует микросервисную архитектуру. Приложение включает два сервиса:
* **shareIt-gateway** — содержит контроллеры, с которыми непосредственно работают пользователи, 
и осуществляет валидацию входных данных
* **shareIt-server** — реализует основную логику приложения
 
Сервисы приложения и база данных запускаются в docker-контейнерах.

Реализовано тестирование приложения:
* юнит-тесты для всего кода, содержащего логику
* интеграционные тесты
* тесты REST-эндпоинтов приложения с использованием MockMVC
* тест для слоя репозиториев
* тесты для работы с JSON для DTO

Технологический стек:
**Java 11, Spring Boot, PostgreSQL, Hibernate, microservices, Docker, JUnit, MockMvc**

## Основные сценарии использования приложения через эндпойнты API

(Параметр `userId` в заголовке `X-Sharer-User-Id` — идентификатор владельца вещи.)

### Функционал «Вещи»:

* `POST /items` — добавление новой вещи.
* `PATCH /items/{itemId}` — редактирование вещи. Изменить можно название, описание и статус доступа к аренде. 
Редактировать вещь может только её владелец.
* `GET /items/{itemId}` — просмотр информации о конкретной вещи по её идентификатору (включая отзывы пользователей). 
Информацию о вещи может просмотреть любой пользователь.
* `GET /items` — просмотр владельцем списка всех его вещей с указанием названия и описания,
а также с отзывами пользователей для каждой вещи. 
При этом отображаются также даты последнего и следующего бронирования каждой вещи.
* `GET /items/search?text={text}` — поиск вещи потенциальным арендатором. 
Пользователь передаёт в строке запроса текст, и система ищет вещи, содержащие этот текст в названии или описании. 
Поиск возвращает только доступные для аренды вещи.
* `POST /items/{itemId}/comment` — добавление отзыва (комментария) на вещь

### Функционал «Бронирование»:

* `POST /bookings` — добавление нового запроса на бронирование. 
Запрос может быть создан любым пользователем, а затем подтверждён владельцем вещи. 
После создания запрос находится в статусе WAITING — «ожидает подтверждения».
* `PATCH /bookings/{bookingId}?approved={approved}` (параметр approved может принимать значения true или false) — 
подтверждение или отклонение запроса на бронирование. Может быть выполнено только владельцем вещи. 
Затем статус бронирования становится либо APPROVED, либо REJECTED.
* `GET /bookings/{bookingId}` — получение данных о конкретном бронировании (включая его статус).
Может быть выполнено либо автором бронирования, либо владельцем вещи, к которой относится бронирование.
* `GET /bookings?state={state}` — получение списка всех бронирований текущего пользователя. 
Параметр state необязательный и по умолчанию равен ALL. 
Также он может принимать значения CURRENT, PAST, FUTURE , WAITING, REJECTED.
Бронирования должны возвращаться отсортированными по дате от более новых к более старым.
* `GET /bookings/owner?state={state}` — получение списка бронирований для всех вещей текущего пользователя.

### Функционал «Запросы»:

* `POST /requests` — добавление нового запроса вещи. Основная часть запроса — текст запроса, где пользователь описывает,
какая именно вещь ему нужна.
* `GET /requests` — получение списка своих запросов вместе с данными об ответах на них. 
Для каждого запроса отображается описание, дата и время создания и список ответов в формате: 
id вещи, название, id владельца.
Так в дальнейшем, используя указанные id вещей, можно будет получить подробную информацию о каждой вещи.
Запросы возвращаются в отсортированном порядке от более новых к более старым.
* `GET /requests/all?from={from}&size={size}` — получение списка запросов, созданных другими пользователями.
С помощью этого эндпоинта пользователи могут просматривать существующие запросы, на которые они могли бы ответить.
Запросы сортируются по дате создания: от более новых к более старым. Результаты возвращаются постранично,
на основе параметров _from_ и _size_.
* `GET /requests/{requestId}` — получение данных об одном конкретном запросе вместе с данными об ответах на него
в том же формате, что и в эндпоинте `GET /requests`. Посмотреть данные об отдельном запросе может любой пользователь.